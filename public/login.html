<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Account</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="style-hy/navBar.css"
    />
    <link
      rel="stylesheet"
      href="style-hy/footer.css"
    />
    <link
      rel="stylesheet"
      href="style-hy/login.css"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <img
          class="logo-header"
          src="assets-henry/latest-logo.png"
          alt=""
        />

        <!-- change -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span
            class="navbar-toggler-icon"
          ></span>
        </button>
        <div
          class="collapse navbar-collapse"
          id="navbarNav"
        >
          <ul
            class="navbar-nav ms-auto navbar-items"
          >
            <li class="nav-item">
              <a
                class="nav-link rounded-3"
                aria-current="page"
                href="index.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link rounded-3"
                href="products.html"
                >Products</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link rounded-3"
                href="contact.html"
                >Contact Us</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link rounded-3"
                href="account.html"
                >Account</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link rounded-3"
                href="cart.html"
                >Cart</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <main>
      <!-- Content starts here -->
      <div
        class="login-header d-flex justify-content-center"
      >
        <h1>Log In</h1>
      </div>
      <form
        class="col g-3 flex-column needs-validation m-auto"
        novalidate
      >
        <div class="m-auto col col-md-4 g-2">
          <label
            type="text"
            class="form-label"
            for="user_Email"
            >E-Mail:</label
          >
          <input
            type="email"
            id="user_Email"
            class="form-control"
            name="user_Email"
            placeholder="Enter Your E-Mail"
            required
          />
          <div
            class="invalid-feedback"
            id="emailValidate"
          >
            Enter Valid E-Mail
          </div>
        </div>
        <div class="m-auto col col-md-4 pt-3">
          <label
            class="form-label"
            for="user_Password"
            >Password:</label
          >
          <input
            type="password"
            id="user_Password"
            class="form-control"
            name="user_Password"
            placeholder="Enter Your Password"
            required
          />
          <div class="invalid-feedback">
            Incorrect/Invalid password. Please try
            again
          </div>
        </div>
        <div class="row d-flex m-3 text-center">
          <!-- Simple link -->
          <a href="#!">Forgot password?</a>
        </div>

        <div
          class="button-container row text-center m-auto d-flex"
        >
          <!-- Submit button -->
          <button
            type="submit"
            class="btn btn-primary btn-block mb-4"
          >
            Sign in
          </button>
        </div>
        <!-- Register buttons -->
        <div class="text-center">
          <p>
            Not a member?
            <a href="signup.html">Register</a>
          </p>
        </div>
      </form>
    </main>
    <footer
    class="text-center text-lg-start text-white"
    style="background-color: #1c2331"
  >
    <!-- Section: Social media -->
    <section
      class="d-flex justify-content-between p-4 social-media-container"
    >
      <!-- Left -->
      <div class="my-2">
        <span
          >Get connected with us on social
          networks:</span
        >
      </div>
      <!-- Left -->

      <!-- Right -->
      <div>
        <a
          href="https://www.facebook.com/METAPCs"
          target="_blank"
          class="text-white me-4"
        >
          <i class="bi bi-facebook"></i>
        </a>
        <a
          href="https://twitter.com/metapcs"
          target="_blank"
          class="text-white me-4"
        >
          <i class="bi bi-twitter"></i>
        </a>
        <a
          href="https://www.instagram.com/metapcsonline"
          target="_blank"
          class="text-white me-4"
        >
          <i class="bi bi-instagram"></i>
        </a>
        <a
          href="https://www.youtube.com/metapcs"
          target="_blank"
          class="text-white me-4"
        >
          <i class="bi bi-youtube"></i>
        </a>
      </div>
      <!-- Right -->
    </section>
    <!-- Section: Social media -->

    <!-- Section: Links  -->
    <section class="footer-container">
      <div
        class="container text-center text-md-start pt-5 footer-body"
      >
        <!-- Grid row -->
        <div class="row mt-3">
          <!-- Grid column -->
          <div
            class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4"
          >
            <!-- Content -->
            <h6
              class="footer-header text-uppercase fw-bold"
            >
              META PC
            </h6>
            <hr
              class="mb-4 mt-0 d-inline-block mx-auto"
              style="
                width: 60px;
                background-color: #7c4dff;
                height: 2px;
              "
            />
            <p>
              We build high-quality and reliable
              PC's to match YOUR needs! Check
              out our higlighted products, or
              customize your own to your
              workflow.
            </p>
          </div>
          <!-- Grid column -->

          <!-- Grid column -->
          <div
            class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4"
          >
            <!-- Links -->
            <h6
              class="text-uppercase fw-bold footer-header"
            >
              Products
            </h6>
            <hr
              class="mb-4 mt-0 d-inline-block mx-auto"
              style="
                width: 60px;
                background-color: #7c4dff;
                height: 2px;
              "
            />
            <p>
              <a
                href="products.html"
                class="text-white"
                >Our Products</a
              >
            </p>
          </div>
          <!-- Grid column -->

          <!-- Grid column -->
          <div
            class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4"
          >
            <!-- Links -->
            <h6
              class="text-uppercase fw-bold footer-header"
            >
              Useful links
            </h6>
            <hr
              class="mb-4 mt-0 d-inline-block mx-auto"
              style="
                width: 60px;
                background-color: #7c4dff;
                height: 2px;
              "
            />
            <p>
              <a
                href="login.html"
                class="text-white"
                >Log In / Sign Up</a
              >
            </p>
            <p>
              <a
                href="account.html"
                class="text-white"
                >Your Account</a
              >
            </p>
            <p>
              <a
                href="contact.html"
                class="text-white"
                >Contact Us</a
              >
            </p>
          </div>
          <!-- Grid column -->

          <!-- Grid column -->
          <div
            class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4"
          >
            <!-- Links -->
            <h6
              class="text-uppercase fw-bold footer-header"
            >
              Contact Us
            </h6>
            <hr
              class="mb-4 mt-0 d-inline-block mx-auto"
              style="
                width: 60px;
                background-color: #7c4dff;
                height: 2px;
              "
            />
            <p>
              <i class="bi bi-house mr-3"></i>
              3259 E. Harbour Drive Suite 101
            </p>
            <p>
              <i class="bi bi-house mr-3"></i>
              Phoenix, Arizona 85034
            </p>
            <p>
              <i
                class="bi bi-envelope me-3"
              ></i>
              support@metapcs.com
            </p>
            <p>
              <i class="bi bi-telephone"></i> +
              01 833 638 2727
            </p>
          </div>
          <!-- Grid column -->
        </div>
        <!-- Grid row -->
      </div>
    </section>
    <!-- Section: Links  -->

    <!-- Copyright -->
    <div
      class="text-center p-3 footer-copyright"
      style="
        background-color: var(--secondary);
        color: var(--text);
      "
    >
      Â© 2023 Copyright:
      <a class="text-white" href="">META PCs</a>
    </div>
    <!-- Copyright -->
  </footer>
  </body>
  <script>
    (() => {
      "use strict";

      const forms = document.querySelectorAll(
        ".needs-validation"
      );

      Array.from(forms).forEach((form) => {
        form.addEventListener(
          "submit",
          (event) => {
            event.preventDefault();

            if (!form.checkValidity()) {
              event.stopPropagation();
              form.classList.add("was-validated");
            } else {
              const emailInput =
                document.getElementById(
                  "user_Email"
                ).value;
              const passwordInput =
                document.getElementById(
                  "user_Password"
                ).value;
              const passwordBox =
                document.getElementById(
                  "user_Password"
                );

              const reqData = {
                email: emailInput,
                password: passwordInput,
              };

              fetch("/login", {
                method: "POST",
                headers: {
                  "Content-Type":
                    "application/json",
                },
                body: JSON.stringify(reqData),
              })
                .then((response) =>
                  response.json()
                )
                .then((data) => {
                  if (data.error) {
                    alert(data.error);
                  } else {
                    console.log(data.message);
                    if (data.success) {
                      window.location.href =
                        "account.html";
                      sessionStorage.setItem(
                        "username",
                        emailInput
                      );
                    } else if (
                      data.message ==
                      "UserNotFound"
                    ) {
                      // Invalid Email
                      document.getElementById(
                        "emailValidate"
                      ).innerHTML =
                        "E-Mail not registered!";
                      const emailBox =
                        document.getElementById(
                          "user_Email"
                        );
                      emailBox.classList.add(
                        "is-invalid"
                      );
                    } else if (
                      data.message ==
                      "Invalid password"
                    ) {
                      document.getElementById(
                        "emailValidate"
                      ).innerHTML =
                        "Enter Valid E-Mail";
                      document
                        .getElementById(
                          "user_Email"
                        )
                        .classList.remove(
                          "is-invalid"
                        );
                      passwordBox.classList.add(
                        "is-invalid"
                      );
                    }
                  }
                })
                .catch((error) => {
                  console.error("Error:", error);
                });
            }
          },
          false
        );
      });
    })();
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"
  ></script>
</html>
